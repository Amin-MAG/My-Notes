# OpenShift

# OC Basic Commands

## Process

To change the templates `.yml` files to config files, you need to `process` the templates.

```bash
$ oc process -f <TEMPLATE_FILE> > oc.build.config
```

At the end a new file called `os.build.config` will be created.

We can pass some parameters based on the templates with `--params`.

```bash
$ oc process -n <NAMESPACE> -f <TEMPLATE_DIR_PATH>/template.yml \
     --param APP_NAME=hello-world \
     --param NAMESPACE=apis \
     --param REGION=teh-1 \
	   > oc.build.config
```

## Apply

To send the configuration file to the cluster to be configured, use:

```bash
$ oc apply -f <CONFIG_FILE_PATH>
```

You can use the pipe concept to connect the process and apply the command:

```bash
$ oc process -n <NAMESPACE> -f <TEMPLATE_DIR_PATH>/template.yml \
     --param APP_NAME=monshi-staging \
     --param NAMESPACE=smapp-api \
     --param REGION=teh-1 | oc apply -f -
```

## Start-Build

To start a new build based on the provided build config.

```bash
$ oc start-build <BUILD_CONFIG>
```

- You can use the `-F` or `--follow` flag to watch its logs until it completes or fails.
- Use `-w` or `--wait` to wait for build and exit with a non-zero return code if the build fails.

```bash
$ oc start-build -F hello-world
```

## Rollout

To start a new deployment based on the latest.

```bash
$ oc rollout latest
```

### History

To get basic information about all the available revisions of your application:

```bash
$ oc rollout history dc/<name>
```

This will show details about all recently created replication controllers for the provided deployment configuration, including any currently running deployment process.

You can view details specific to a revision by using the `--revision` flag:

```bash
$ oc rollout history dc/<name> --revision=1
```

# Resources

[Basic Deployment Operations](https://docs.openshift.com/container-platform/3.3/dev_guide/deployments/basic_deployment_operations.html)