# gRPC

## Installation

First install the compiler `protoc` then install the go lang plugin

```bash
go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
go get -u google.golang.org/grpc
```

# Simple gRPC

Here we will implement a very basic server and clients. This server has a service responsible for calculating the majority of a list.

## Proto Files

```protobuf
syntax = "proto3";

option go_package = "bale_interview/apis";

package bale_interview;

service Majority {
  rpc CalculateListMajority(ListMajorityRequest) returns (ListMajorityReply) {}
}

// The request message containing the user's name.
message ListMajorityRequest {
  repeated int32 numbers = 1;
}

// The response message containing the greetings
message ListMajorityReply {
  string message = 1;
  int32 majorityNumber = 2;
}
```

`repeated` is for defining an array in proto files.

### Generating the Go files

You need to use `protoc` command to generate go files:

```bash
$ protoc --go_out=. --go_opt=paths=source_relative \
      --go-grpc_out=. --go-grpc_opt=paths=source_relative \
      apis/majority.proto
```

You specify the source, the output directory, and the proto file.  After executing this command some Go files will be generated.

